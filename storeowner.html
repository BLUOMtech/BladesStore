<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Blade Designs – Store Owner</title>
<style>
body{font-family:system-ui;background:#f5f5f5;margin:0;padding:20px}
h1{margin-bottom:10px}
.card{background:#fff;padding:20px;border-radius:12px;box-shadow:0 10px 20px rgba(0,0,0,0.08);margin-bottom:20px}
input,select,textarea,button{width:100%;padding:10px;margin-top:8px;margin-bottom:12px;border-radius:8px;border:1px solid #ccc}
button{background:#f1641e;color:#fff;font-weight:bold;cursor:pointer}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border-bottom:1px solid #ddd;padding:8px;text-align:left}
.hidden{display:none}
</style>
</head>
<body>

<h1>Blade Designs – Store Owner Panel</h1>

<div id="loginCard" class="card">
  <h2>Owner Login</h2>
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<div id="panel" class="hidden">

  <div class="card">
    <h2>Add / Edit Product</h2>
    <input id="pid" placeholder="ID (leave blank for new)">
    <input id="title" placeholder="Title">
    <input id="price" placeholder="Price">
    <input id="category" placeholder="Category (stickers, digital, etc)">
    <select id="type">
      <option value="physical">Physical</option>
      <option value="digital">Digital</option>
    </select>
    <input id="image" placeholder="Image URL">
    <input id="download" placeholder="Download URL (for digital)">
    <textarea id="description" placeholder="Description"></textarea>
    <button onclick="saveProduct()">Save Product</button>
  </div>

  <div class="card">
    <h2>Current Products</h2>
    <table id="productTable">
      <thead>
        <tr><th>ID</th><th>Title</th><th>Price</th><th>Actions</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

</div>

<script>
// FIRST TIME SETUP (change these after first login)
if(!localStorage.getItem("ownerEmail")){
  localStorage.setItem("ownerEmail","owner@blade.com");
  localStorage.setItem("ownerPass","blade123");
}

function login(){
  const e=document.getElementById("email").value;
  const p=document.getElementById("password").value;
  if(e===localStorage.getItem("ownerEmail") && p===localStorage.getItem("ownerPass")){
    document.getElementById("loginCard").classList.add("hidden");
    document.getElementById("panel").classList.remove("hidden");
    loadProducts();
  }else{
    alert("Wrong login");
  }
}

function getProducts(){
  return JSON.parse(localStorage.getItem("storeProducts")) || [];
}

function setProducts(p){
  localStorage.setItem("storeProducts",JSON.stringify(p));
}

function saveProduct(){
  let products=getProducts();
  const id=document.getElementById("pid").value || Date.now();
  const product={
    id:Number(id),
    title:title.value,
    price:Number(price.value),
    category:category.value,
    type:type.value,
    image:image.value,
    download:download.value,
    description:description.value
  };

  const index=products.findIndex(p=>p.id==id);
  if(index>-1){products[index]=product;} else {products.push(product);}
  setProducts(products);
  loadProducts();
  alert("Saved!");
}

function loadProducts(){
  const products=getProducts();
  const body=document.querySelector("#productTable tbody");
  body.innerHTML="";
  products.forEach(p=>{
    body.innerHTML+=`
      <tr>
        <td>${p.id}</td>
        <td>${p.title}</td>
        <td>$${p.price}</td>
        <td>
          <button onclick='edit(${JSON.stringify(p)})'>Edit</button>
          <button onclick='del(${p.id})'>Delete</button>
        </td>
      </tr>`;
  });
}

function edit(p){
  pid.value=p.id;
  title.value=p.title;
  price.value=p.price;
  category.value=p.category;
  type.value=p.type;
  image.value=p.image;
  download.value=p.download||"";
  description.value=p.description;
}

function del(id){
  let products=getProducts().filter(p=>p.id!==id);
  setProducts(products);
  loadProducts();
}
</script>

</body>
</html>
